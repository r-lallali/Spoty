import{a1 as v,a2 as y,a3 as P,a4 as N,a5 as x,a6 as S,a7 as E,a8 as U,r as l,d as C,c as A,s as f,j as M,l as O,o as k,a9 as h,aa as g}from"./index-DdlObs6W.js";const T=()=>(e,t)=>t.reduce((a,o)=>{const[n,i]=a,s=o;return i[s]!==void 0&&(n[s]=i[s]),delete i[s],[n,i]},[{},{...e}]),b=e=>T()(e,["immediate","lazyMount","onExitComplete","present","skipAnimationOnMount","unmountOnExit"]);function R(e,t){const{state:a,send:o,context:n}=e,i=a.matches("mounted","unmountSuspended");return{skip:!n.get("initial"),present:i,setNode(s){s&&o({type:"NODE.SET",node:s})},unmount(){o({type:"UNMOUNT"})}}}var w=v({props({props:e}){return{...e,present:!!e.present}},initialState({prop:e}){return e("present")?"mounted":"unmounted"},refs(){return{node:null,styles:null}},context({bindable:e}){return{unmountAnimationName:e(()=>({defaultValue:null})),prevAnimationName:e(()=>({defaultValue:null})),present:e(()=>({defaultValue:!1})),initial:e(()=>({sync:!0,defaultValue:!1}))}},exit:["clearInitial","cleanupNode"],watch({track:e,prop:t,send:a}){e([()=>t("present")],()=>{a({type:"PRESENCE.CHANGED"})})},on:{"NODE.SET":{actions:["setupNode"]},"PRESENCE.CHANGED":{actions:["setInitial","syncPresence"]}},states:{mounted:{on:{UNMOUNT:{target:"unmounted",actions:["clearPrevAnimationName","invokeOnExitComplete"]},"UNMOUNT.SUSPEND":{target:"unmountSuspended"}}},unmountSuspended:{effects:["trackAnimationEvents"],on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]},UNMOUNT:{target:"unmounted",actions:["clearPrevAnimationName","invokeOnExitComplete"]}}},unmounted:{on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]}}}},implementations:{actions:{setInitial:({context:e})=>{e.get("initial")||queueMicrotask(()=>{e.set("initial",!0)})},clearInitial:({context:e})=>{e.set("initial",!1)},invokeOnExitComplete:({prop:e,refs:t})=>{e("onExitComplete")?.();const a=t.get("node");if(!a)return;const o=S(a),n=new o.CustomEvent("exitcomplete",{bubbles:!1});a.dispatchEvent(n)},setupNode:({refs:e,event:t})=>{e.get("node")!==t.node&&(e.set("node",t.node),e.set("styles",x(t.node)))},cleanupNode:({refs:e})=>{e.set("node",null),e.set("styles",null)},syncPresence:({context:e,refs:t,send:a,prop:o})=>{const n=o("present");if(n)return a({type:"MOUNT",src:"presence.changed"});const i=t.get("node");if(!n&&i?.ownerDocument.visibilityState==="hidden")return a({type:"UNMOUNT",src:"visibilitychange"});N(()=>{const s=m(t.get("styles"));e.set("unmountAnimationName",s),s==="none"||s===e.get("prevAnimationName")||t.get("styles")?.display==="none"||t.get("styles")?.animationDuration==="0s"?a({type:"UNMOUNT",src:"presence.changed"}):a({type:"UNMOUNT.SUSPEND"})})},setPrevAnimationName:({context:e,refs:t})=>{N(()=>{e.set("prevAnimationName",m(t.get("styles")))})},clearPrevAnimationName:({context:e})=>{e.set("prevAnimationName",null)}},effects:{trackAnimationEvents:({context:e,refs:t,send:a,prop:o})=>{const n=t.get("node");if(!n)return;const i=r=>{(r.composedPath?.()?.[0]??r.target)===n&&e.set("prevAnimationName",m(t.get("styles")))},s=r=>{const c=m(t.get("styles"));E(r)===n&&c===e.get("unmountAnimationName")&&!o("present")&&a({type:"UNMOUNT",src:"animationend"})},u=r=>{E(r)===n&&!o("present")&&a({type:"UNMOUNT",src:"animationcancel"})};n.addEventListener("animationstart",i),n.addEventListener("animationcancel",u),n.addEventListener("animationend",s);const p=y(n,{animationFillMode:"forwards"});return()=>{n.removeEventListener("animationstart",i),n.removeEventListener("animationcancel",u),n.removeEventListener("animationend",s),P(()=>p())}}}}});function m(e){return e?.animationName||"none"}U()(["onExitComplete","present","immediate"]);function D(e,t={}){const{sync:a=!1}=t,o=L(e);return l.useCallback((...n)=>a?queueMicrotask(()=>o.current?.(...n)):o.current?.(...n),[a,o])}function L(e){const t=l.useRef(e);return t.current=e,t}const q=(e={})=>{const{lazyMount:t,unmountOnExit:a,present:o,skipAnimationOnMount:n=!1,...i}=e,s=l.useRef(!1),u={...i,present:o,onExitComplete:D(e.onExitComplete)},p=C(w,u),r=R(p);r.present&&(s.current=!0);const c=!r.present&&!s.current&&t||a&&!r.present&&s.current,d=()=>({"data-state":r.skip&&n?void 0:o?"open":"closed",hidden:!r.present});return{ref:r.setNode,getPresenceProps:d,present:r.present,unmounted:c}},[G,H]=A({name:"PresenceContext",hookName:"usePresenceContext",providerName:"<PresenceProvider />"}),{withContext:z}=f({key:"badge"}),I=z("span");I.displayName="Badge";const{useRecipeResult:V}=f({key:"separator"}),j=l.forwardRef(function(t,a){const{styles:o,className:n,props:i}=V(t),s=t.orientation||"horizontal";return M.jsx(O.span,{ref:a,role:g(s)?"separator":"presentation","aria-orientation":g(s)?s:void 0,...h(i,["orientation"]),className:k(n,t.className),css:[o,t.css]})});j.displayName="Separator";export{I as B,G as P,j as S,H as a,T as c,b as s,q as u};
