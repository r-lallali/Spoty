import{c as P,L as Re,r as l,m as c,j as e,a as p,g as Le,E as Ae,b as H,u as B,d as q,F as Ge,G as Ne,n as _,H as Te,J as ze,p as A,K as Ve,M as W,W as E,P as $e,l as We,Q as Ee,T as Fe,U as Me,S as G,A as v,B as N,V as Oe,X as De,Y as He,Z as Be,_ as qe,$ as _e,a0 as Ue,z as F}from"./index-DdlObs6W.js";import{c as U,I as T}from"./create-icon-CWbwgp3R.js";import{H as y,V as k,F as S}from"./v-stack-DhS3kTGh.js";import{T as u}from"./index-_MCSnTcs.js";import{a as Z,c as f,s as X,u as Y,P as J,B as w,S as Ze}from"./separator-CnwphMyQ.js";import{C as z,a as V}from"./card-D6MlVoqg.js";import{I as L}from"./image-ChmrOsv1.js";const[ir,K]=P({name:"FieldContext",hookName:"useFieldContext",providerName:"<FieldProvider />",strict:!1}),Xe=o=>new Re(o),[Q,h]=P({name:"ComboboxContext",hookName:"useComboboxContext",providerName:"<ComboboxProvider />"}),ee=l.forwardRef((o,r)=>{const t=h(),s=c(t.getClearTriggerProps(),o);return e.jsx(p.button,{...s,ref:r})});ee.displayName="ComboboxClearTrigger";const oe=l.forwardRef((o,r)=>{const t=h(),s=Z(),n=c(t.getContentProps(),s.getPresenceProps(),o);return s.unmounted?null:e.jsx(p.div,{...n,ref:Le(s.ref,r)})});oe.displayName="ComboboxContent";const Ye=Ae.build(),re=l.forwardRef((o,r)=>h().collection.size!==0?null:e.jsx(p.div,{...Ye.empty.attrs,...o,role:"presentation",ref:r}));re.displayName="ComboboxEmpty";const te=l.forwardRef((o,r)=>{const t=h(),s=c(t.getControlProps(),o);return e.jsx(p.div,{...s,ref:r})});te.displayName="ComboboxControl";const se=l.forwardRef((o,r)=>{const t=h(),s=c(t.getInputProps(),o),n=K();return e.jsx(p.input,{"aria-describedby":n?.ariaDescribedby,...s,ref:r})});se.displayName="ComboboxInput";const[Je]=P({name:"ComboboxItemContext",hookName:"useComboboxItemContext",providerName:"<ComboboxItemProvider />"}),[Ke,ne]=P({name:"ComboboxItemPropsContext",hookName:"useComboboxItemPropsContext",providerName:"<ComboboxItemPropsProvider />"}),Qe=f(),ie=l.forwardRef((o,r)=>{const[t,s]=Qe(o,["item","persistFocus"]),n=h(),i=c(n.getItemProps(t),s),d=n.getItemState(t);return e.jsx(Ke,{value:t,children:e.jsx(Je,{value:d,children:e.jsx(p.div,{...i,ref:r})})})});ie.displayName="ComboboxItem";const[eo,oo]=P({name:"ComboboxItemGroupPropsContext",hookName:"useComboboxItemGroupPropsContext",providerName:"<ComboboxItemGroupPropsProvider />"}),ro=f(),ae=l.forwardRef((o,r)=>{const t=l.useId(),[s,n]=ro(o,["id"]),i={id:t,...s},d=h(),m=c(d.getItemGroupProps(i),n);return e.jsx(eo,{value:i,children:e.jsx(p.div,{...m,ref:r})})});ae.displayName="ComboboxItemGroup";const le=l.forwardRef((o,r)=>{const t=h(),s=oo(),n=c(t.getItemGroupLabelProps({htmlFor:s.id}),o);return e.jsx(p.div,{...n,ref:r})});le.displayName="ComboboxItemGroupLabel";const de=l.forwardRef((o,r)=>{const t=h(),s=ne(),n=c(t.getItemIndicatorProps(s),o);return e.jsx(p.div,{...n,ref:r})});de.displayName="ComboboxItemIndicator";const ce=l.forwardRef((o,r)=>{const t=h(),s=ne(),n=c(t.getItemTextProps(s),o);return e.jsx(p.span,{...n,ref:r})});ce.displayName="ComboboxItemText";const pe=l.forwardRef((o,r)=>{const t=h(),s=c(t.getLabelProps(),o);return e.jsx(p.label,{...s,ref:r})});pe.displayName="ComboboxLabel";const ue=l.forwardRef((o,r)=>{const t=h(),s=Z(),n=c(t.getPositionerProps(),o);return s.unmounted?null:e.jsx(p.div,{...n,ref:r})});ue.displayName="ComboboxPositioner";const to=o=>{const r=l.useId(),{dir:t}=H(),{getRootNode:s}=B(),n=K(),i={id:r,ids:{label:n?.ids.label,input:n?.ids.control},disabled:n?.disabled,readOnly:n?.readOnly,required:n?.required,invalid:n?.invalid,dir:t,getRootNode:s,...o},d=q(Ge,i);return Ne(d,_)},so=(o,r)=>{const[t,s]=X(o),[n,i]=f()(s,["allowCustomValue","alwaysSubmitOnEnter","autoFocus","closeOnSelect","collection","composite","defaultHighlightedValue","defaultInputValue","defaultOpen","defaultValue","disabled","disableLayer","form","highlightedValue","id","ids","inputBehavior","inputValue","invalid","loopFocus","multiple","name","navigate","onFocusOutside","onHighlightChange","onInputValueChange","onInteractOutside","onOpenChange","onPointerDownOutside","onSelect","onValueChange","open","openOnChange","openOnClick","openOnKeyPress","placeholder","positioning","readOnly","required","scrollToIndexFn","selectionBehavior","translations","value"]),d=to(n),m=Y(c({present:d.open},t)),a=c(d.getRootProps(),i);return e.jsx(Q,{value:d,children:e.jsx(J,{value:m,children:e.jsx(p.div,{...a,ref:r})})})},no=l.forwardRef(so),io=(o,r)=>{const[t,s]=X(o),[{value:n},i]=f()(s,["value"]),d=Y(c({present:n.open},t)),m=c(n.getRootProps(),i);return e.jsx(Q,{value:n,children:e.jsx(J,{value:d,children:e.jsx(p.div,{...m,ref:r})})})},ao=l.forwardRef(io),lo=f(),me=l.forwardRef((o,r)=>{const[t,s]=lo(o,["focusable"]),n=h(),i=c(n.getTriggerProps(t),s);return e.jsx(p.button,{...i,ref:r})});me.displayName="ComboboxTrigger";const[xe,C]=P({name:"SliderContext",hookName:"useSliderContext",providerName:"<SliderProvider />"}),be=l.forwardRef((o,r)=>{const t=C(),s=c(t.getControlProps(),o);return e.jsx(p.div,{...s,ref:r})});be.displayName="SliderControl";const[co,po]=P({name:"SliderThumbPropsContext",hookName:"useSliderThumbPropsContext",providerName:"<SliderThumbPropsProvider />"}),he=l.forwardRef((o,r)=>{const t=C(),{index:s}=po(),n=c(t.getDraggingIndicatorProps({index:s}),o);return e.jsx(p.span,{...n,ref:r,children:o.children||t.getThumbValue(s)})});he.displayName="SliderDraggingIndicator";const ge=l.forwardRef((o,r)=>{const t=C(),s=c(t.getLabelProps(),o);return e.jsx(p.label,{...s,ref:r})});ge.displayName="SliderLabel";const uo=f(),fe=l.forwardRef((o,r)=>{const[t,s]=uo(o,["value"]),n=C(),i=c(n.getMarkerProps(t),s);return e.jsx(p.span,{...i,ref:r})});fe.displayName="SliderMarker";const Ce=l.forwardRef((o,r)=>{const t=C(),s=c(t.getMarkerGroupProps(),o);return e.jsx(p.div,{...s,ref:r})});Ce.displayName="SliderMarkerGroup";const je=l.forwardRef((o,r)=>{const t=C(),s=c(t.getRangeProps(),o);return e.jsx(p.div,{...s,ref:r})});je.displayName="SliderRange";const mo=o=>{const r=l.useId(),{getRootNode:t}=B(),{dir:s}=H(),n={id:r,dir:s,getRootNode:t,...o},i=q(ze,n);return Te(i,_)},xo=f(),ye=l.forwardRef((o,r)=>{const[t,s]=xo(o,["aria-label","aria-labelledby","defaultValue","disabled","form","getAriaValueText","id","ids","invalid","max","min","minStepsBetweenThumbs","name","onFocusChange","onValueChange","onValueChangeEnd","orientation","origin","readOnly","step","thumbAlignment","thumbAlignment","thumbSize","value"]),n=mo(t),i=c(n.getRootProps(),s);return e.jsx(xe,{value:n,children:e.jsx(p.div,{...i,ref:r})})});ye.displayName="SliderRoot";const bo=f(),Pe=l.forwardRef((o,r)=>{const[{value:t},s]=bo(o,["value"]),n=c(t.getRootProps(),s);return e.jsx(xe,{value:t,children:e.jsx(p.div,{...n,ref:r})})});Pe.displayName="SliderRootProvider";const ho=f(),ve=l.forwardRef((o,r)=>{const[t,s]=ho(o,["index","name"]),n=C(),i=c(n.getThumbProps(t),s);return e.jsx(co,{value:t,children:e.jsx(p.div,{...i,ref:r})})});ve.displayName="SliderThumb";const Se=l.forwardRef((o,r)=>{const t=C(),s=c(t.getTrackProps(),o);return e.jsx(p.div,{...s,ref:r})});Se.displayName="SliderTrack";const we=l.forwardRef((o,r)=>{const{children:t,...s}=o,n=C(),i=c(n.getValueTextProps(),s);return e.jsx(p.span,{...i,ref:r,children:t||n.value.join(", ")})});we.displayName="SliderValueText";const[go,fo]=Ve({name:"AlertStatusContext",hookName:"useAlertStatusContext",providerName:"<Alert />"}),{withProvider:Co,withContext:$,useStyles:jo}=A({key:"alert"}),yo=Co("div","root",{forwardAsChild:!0,wrapElement(o,r){return e.jsx(go,{value:{status:r.status||"info"},children:o})}}),Po=$("div","title");$("div","description");$("div","content");const vo={info:W,warning:E,success:$e,error:E,neutral:W},So=l.forwardRef(function(r,t){const s=fo(),n=jo(),i=typeof s.status=="string"?vo[s.status]:l.Fragment,{children:d=e.jsx(i,{}),...m}=r;return e.jsx(We.span,{ref:t,...m,css:[n.indicator,r.css],children:d})}),{withProvider:ke,withContext:x}=A({key:"combobox"});ke(ao,"root",{forwardAsChild:!0});const wo=ke(no,"root",{forwardAsChild:!0}),ko=x(me,"trigger",{forwardAsChild:!0,forwardProps:["focusable"],defaultProps:{children:e.jsx(Ee,{})}}),Io=x(ue,"positioner",{forwardAsChild:!0}),Ro=x(oe,"content",{forwardAsChild:!0}),Lo=x(se,"input",{forwardAsChild:!0});x(ee,"clearTrigger",{forwardAsChild:!0,defaultProps:{children:e.jsx(Fe,{})}});const Ao=x("div","indicatorGroup"),M=x(ae,"itemGroup",{forwardAsChild:!0}),O=x(le,"itemGroupLabel",{forwardAsChild:!0}),D=x(ie,"item",{forwardAsChild:!0});x(ce,"itemText",{forwardAsChild:!0});x(de,"itemIndicator",{forwardAsChild:!0,defaultProps:{children:e.jsx(Me,{})}});const Go=x(te,"control",{forwardAsChild:!0});x(pe,"label",{forwardAsChild:!0});const No=x(re,"empty",{forwardAsChild:!0}),{withProvider:Ie,withContext:g}=A({key:"slider"});Ie(Pe,"root",{forwardAsChild:!0});const To=Ie(ye,"root",{forwardAsChild:!0}),zo=g(Se,"track",{forwardAsChild:!0}),Vo=g(je,"range",{forwardAsChild:!0}),$o=g(ve,"thumb",{forwardAsChild:!0});g(we,"valueText",{forwardAsChild:!0});g(ge,"label",{forwardAsChild:!0});const Wo=g(Ce,"markerGroup",{forwardAsChild:!0}),Eo=g(fe,"marker",{forwardAsChild:!0}),Fo=g("div","markerIndicator");g(he,"draggingIndicator",{forwardAsChild:!0});l.forwardRef(function(r,t){const{marks:s,...n}=r;return s?.length?e.jsx(Wo,{ref:t,...n,children:s.map((i,d)=>{const m=typeof i=="number"?i:i.value,a=typeof i=="number"?void 0:i.label;return e.jsxs(Eo,{value:m,children:[e.jsx(Fo,{}),a!=null&&e.jsx("span",{className:"chakra-slider__marker-label",children:a})]},d)})}):null});const Mo=g(be,"control",{forwardAsChild:!0}),Oo=U({displayName:"StarsIcon",defaultProps:{fill:"none",viewBox:"0 0 24 24"},path:e.jsxs(e.Fragment,{children:[e.jsx("path",{d:"M11.017 2.81395C11.0599 2.58456 11.1816 2.37737 11.3611 2.22827C11.5406 2.07917 11.7667 1.99756 12 1.99756C12.2334 1.99756 12.4594 2.07917 12.6389 2.22827C12.8184 2.37737 12.9402 2.58456 12.983 2.81395L14.034 8.37195C14.1087 8.7671 14.3007 9.13057 14.585 9.41492C14.8694 9.69928 15.2329 9.89131 15.628 9.96595L21.186 11.017C21.4154 11.0598 21.6226 11.1815 21.7717 11.3611C21.9208 11.5406 22.0024 11.7666 22.0024 12C22.0024 12.2333 21.9208 12.4593 21.7717 12.6389C21.6226 12.8184 21.4154 12.9401 21.186 12.983L15.628 14.034C15.2329 14.1086 14.8694 14.3006 14.585 14.585C14.3007 14.8693 14.1087 15.2328 14.034 15.628L12.983 21.186C12.9402 21.4153 12.8184 21.6225 12.6389 21.7716C12.4594 21.9207 12.2334 22.0023 12 22.0023C11.7667 22.0023 11.5406 21.9207 11.3611 21.7716C11.1816 21.6225 11.0599 21.4153 11.017 21.186L9.96601 15.628C9.89137 15.2328 9.69934 14.8693 9.41498 14.585C9.13063 14.3006 8.76716 14.1086 8.37201 14.034L2.81401 12.983C2.58462 12.9401 2.37743 12.8184 2.22833 12.6389C2.07924 12.4593 1.99762 12.2333 1.99762 12C1.99762 11.7666 2.07924 11.5406 2.22833 11.3611C2.37743 11.1815 2.58462 11.0598 2.81401 11.017L8.37201 9.96595C8.76716 9.89131 9.13063 9.69928 9.41498 9.41492C9.69934 9.13057 9.89137 8.7671 9.96601 8.37195L11.017 2.81395Z",stroke:"currentColor",strokeOpacity:"0.87",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M20 2V6",stroke:"currentColor",strokeOpacity:"0.87",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M22 4H18",stroke:"currentColor",strokeOpacity:"0.87",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 22C5.10457 22 6 21.1046 6 20C6 18.8954 5.10457 18 4 18C2.89543 18 2 18.8954 2 20C2 21.1046 2.89543 22 4 22Z",stroke:"currentColor",strokeOpacity:"0.87",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})});function R({value:o,onChange:r,label:t,description:s}){return e.jsxs(G,{gap:"8px",width:"100%",children:[e.jsxs(y,{justifyContent:"space-between",width:"100%",children:[e.jsx(u,{fontWeight:"semibold",fontSize:"md",children:t}),e.jsx(w,{bg:"white",color:"black",borderRadius:"16px",size:"md",px:"8px",py:"4px",children:o[0].toFixed(2)})]}),e.jsx(To,{defaultValue:[50],onValueChange:n=>r([n.value[0]/100]),children:e.jsxs(Mo,{children:[e.jsx(zo,{bg:"spotify.greenDark",height:"6px",children:e.jsx(Vo,{bg:"spotify.green"})}),e.jsx($o,{index:0,boxSize:4,bg:"spotify.green",borderColor:"spotify.green"})]})}),s&&e.jsx(u,{fontWeight:"normal",fontSize:"sm",color:"spotify.lightGray",children:s})]})}function Do({audioFeatures:o,setAudioFeatures:r}){const t=i=>{r(d=>({...d,danceability:i}))},s=i=>{r(d=>({...d,energy:i}))},n=i=>{r(d=>({...d,valence:i}))};return e.jsx(z,{width:"100%",bg:"spotify.darker",borderRadius:"12px",children:e.jsxs(V,{padding:"16px",gap:"24px",children:[e.jsx(u,{fontWeight:"bold",fontSize:"xl",children:"Caractéristiques Audio"}),e.jsx(R,{value:o.danceability,onChange:t,label:"Danceability",description:"À quel point la musique est adaptée à la danse"}),e.jsx(R,{value:o.energy,onChange:s,label:"Energy",description:"Intensité et activité de la musique"}),e.jsx(R,{value:o.valence,onChange:n,label:"Valence (Positivité)",description:"Humeur positive ou négative de la musique"})]})})}const Ho=[{label:"Pop",value:"pop"},{label:"Rock",value:"rock"},{label:"Hip-Hop",value:"hip-hop"},{label:"Electronic",value:"electronic"},{label:"Jazz",value:"jazz"},{label:"Classical",value:"classical"},{label:"R&B",value:"r-n-b"},{label:"Country",value:"country"}];function Bo({selectedSeeds:o=[],onSelectSeed:r}){const t=s=>{r({type:"genre",id:s.value,name:s.label})};return e.jsxs(k,{gap:"8px",align:"start",children:[e.jsx(u,{fontWeight:"normal",fontSize:"sm",color:"spotify.lightGray",children:"Genres populaires :"}),e.jsx(v,{children:e.jsx(y,{gap:"8px",flexWrap:"wrap",children:Ho.map(s=>e.jsx(N,{fontSize:"sm",h:"32px",borderRadius:"full",paddingX:"12px",cursor:"pointer",variant:"outline",borderColor:"spotify.border",color:"spotify.lightGray",bg:o.some(n=>n.id===s.value)?"spotify.green/50":"transparent",onClick:()=>t(s),children:s.label},s.value))})})]})}function qo({onSelectSeed:o}){const[r,t]=l.useState([]),s=Xe({items:r,itemToString:a=>a.label,itemToValue:a=>a.value}),n=l.useCallback(async a=>{if(a)try{const b=await Oe(a,["artist","track"],5);if(!b)return;const I=[];b.artists?.items&&b.artists.items.forEach(j=>{I.push({label:j.name,value:j.id,type:"artist",imageUrl:j.images?.[0]?.url})}),b.tracks?.items&&b.tracks.items.forEach(j=>{I.push({label:j.name,value:j.id,type:"track",imageUrl:j.album.images?.[0]?.url})}),t(I)}catch(b){console.error("Erreur recherche Spotify",b)}},[]),i=a=>{a&&(o({type:a.type,id:a.value,name:a.label}),t([]))},d=l.useMemo(()=>r.filter(a=>a.type==="artist"),[r]),m=l.useMemo(()=>r.filter(a=>a.type==="track"),[r]);return e.jsxs(wo,{collection:s,onInputValueChange:a=>n(a.inputValue),onValueChange:a=>{a.items.length>0&&i(a.items[0])},openOnClick:!0,size:"lg",children:[e.jsxs(Go,{children:[e.jsx(Lo,{borderColor:"spotify.border",placeholder:"Rechercher artistes ou pistes"}),e.jsx(Ao,{children:e.jsx(ko,{})})]}),e.jsx(Io,{children:e.jsxs(Ro,{children:[e.jsx(No,{children:"Pas de résultats"}),d.length>0&&e.jsxs(M,{children:[e.jsx(O,{color:"gray.500",fontSize:"xs",fontWeight:"bold",mb:1,px:2,children:"ARTISTES"}),d.map(a=>e.jsx(D,{item:a,_hover:{bg:"whiteAlpha.200"},borderRadius:"md",mb:1,children:e.jsxs(y,{gap:3,children:[e.jsx(L,{rounded:"full",src:a.imageUrl||"",boxSize:"32px"}),e.jsx(u,{fontWeight:"medium",color:"white",children:a.label})]})},a.value))]}),d.length>0&&m.length>0&&e.jsx(Ze,{borderColor:"spotify.border"}),m.length>0&&e.jsxs(M,{children:[e.jsx(O,{color:"gray.500",fontSize:"xs",fontWeight:"bold",mb:1,px:2,children:"PISTES"}),m.map(a=>e.jsx(D,{item:a,_hover:{bg:"whiteAlpha.200"},borderRadius:"md",mb:1,children:e.jsxs(y,{gap:3,children:[e.jsx(L,{rounded:"md",src:a.imageUrl||"",boxSize:"32px"}),e.jsxs(G,{gap:0,children:[e.jsx(u,{fontWeight:"medium",color:"white",lineClamp:1,children:a.label}),e.jsx(u,{fontSize:"xs",color:"gray.400",lineClamp:1,children:a.subLabel})]})]})},a.value))]})]})})]})}function _o(o){return De({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M6.2253 4.81108C5.83477 4.42056 5.20161 4.42056 4.81108 4.81108C4.42056 5.20161 4.42056 5.83477 4.81108 6.2253L10.5858 12L4.81114 17.7747C4.42062 18.1652 4.42062 18.7984 4.81114 19.1889C5.20167 19.5794 5.83483 19.5794 6.22535 19.1889L12 13.4142L17.7747 19.1889C18.1652 19.5794 18.7984 19.5794 19.1889 19.1889C19.5794 18.7984 19.5794 18.1652 19.1889 17.7747L13.4142 12L19.189 6.2253C19.5795 5.83477 19.5795 5.20161 19.189 4.81108C18.7985 4.42056 18.1653 4.42056 17.7748 4.81108L12 10.5858L6.2253 4.81108Z",fill:"currentColor"},child:[]}]})(o)}function Uo({selectedSeeds:o,onRemoveSeed:r}){return e.jsxs(k,{gap:"8px",align:"start",children:[e.jsx(u,{fontWeight:"normal",fontSize:"sm",color:"spotify.lightGray",children:"Semences sélectionnées :"}),e.jsxs(y,{gap:"8px",width:"100%",children:[o.length===0&&e.jsx(w,{h:"32px",fontSize:"sm",bg:"spotify.lightGray",color:"black",children:"Aucune semence sélectionnée"}),o.map(t=>e.jsxs(w,{fontSize:"sm",h:"32px",color:"black",bg:"spotify.green",borderRadius:"full",paddingX:"12px",cursor:"pointer",onClick:()=>r(t.id),children:[t.name,e.jsx(T,{as:_o})]},t.id))]})]})}function Zo({selectedSeeds:o,setSelectedSeeds:r}){const t=n=>{o.find(i=>i.id===n.id)||o.length>=5||r([...o,n])},s=n=>{r(o.filter(i=>i.id!==n))};return e.jsx(z,{width:"100%",bg:"spotify.darker",borderRadius:"12px",children:e.jsxs(V,{padding:"16px",gap:"24px",children:[e.jsx(u,{fontWeight:"bold",fontSize:"xl",children:"Semences"}),e.jsx(qo,{onSelectSeed:t}),e.jsx(Bo,{selectedSeeds:o,onSelectSeed:t}),e.jsx(Uo,{selectedSeeds:o,onRemoveSeed:s}),e.jsxs(yo,{bg:"spotify.green/10",children:[e.jsx(So,{color:"spotify.green"}),e.jsx(Po,{fontSize:"sm",fontWeight:"normal",color:"white",children:"Ajoutez jusqu'à 5 semences (artistes, pistes ou genres) pour personnaliser vos recommandations"})]})]})})}function Xo({onRecommendationsChange:o}){const[r,t]=l.useState({danceability:[.5],energy:[.5],valence:[.5]}),[s,n]=l.useState(!1),[i,d]=l.useState([]),m=async()=>{try{n(!0);const b=await He({targets:r,seeds:i});o(b)}catch(b){console.error("Error generating recommendations:",b)}finally{n(!1)}},a=i.length>0;return e.jsxs(k,{alignItems:"start",gap:"24px",children:[e.jsxs(G,{flexDirection:"row",gap:"24px",width:"100%",height:"100%",children:[e.jsx(Do,{audioFeatures:r,setAudioFeatures:t}),e.jsx(Zo,{selectedSeeds:i,setSelectedSeeds:d})]}),e.jsxs(N,{bg:a?"white":"gray.600",color:a?"black":"gray.400",size:"2xl",borderRadius:"full",gap:2,onClick:m,disabled:!a,loading:s,cursor:a?"pointer":"not-allowed",_hover:a?{bg:"gray.100"}:{},opacity:a?1:.6,children:[e.jsx(T,{as:Oo,boxSize:6}),e.jsx(u,{fontWeight:"medium",fontSize:"md",children:a?"Générer les recommandations":"Sélectionnez au moins une semence"})]})]})}const Yo=U({displayName:"SaveIcon",defaultProps:{fill:"none",viewBox:"0 0 24 24"},path:e.jsxs(e.Fragment,{children:[e.jsx("path",{d:"M15.2 3C15.7275 3.00751 16.2307 3.22317 16.6 3.6L20.4 7.4C20.7768 7.76926 20.9925 8.27246 21 8.8V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H15.2Z",stroke:"currentColor",strokeOpacity:"0.87",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M17 21V14C17 13.7348 16.8946 13.4804 16.7071 13.2929C16.5196 13.1054 16.2652 13 16 13H8C7.73478 13 7.48043 13.1054 7.29289 13.2929C7.10536 13.4804 7 13.7348 7 14V21",stroke:"currentColor",strokeOpacity:"0.87",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M7 3V7C7 7.26522 7.10536 7.51957 7.29289 7.70711C7.48043 7.89464 7.73478 8 8 8H15",stroke:"currentColor",strokeOpacity:"0.87",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})});function Jo({index:o,track:r,score:t}){return e.jsxs(S,{align:"center",justify:"space-between",p:3,borderRadius:"md",gap:4,w:"full",h:"84px",border:"1px solid",borderColor:"spotify.border",children:[e.jsx(u,{color:"spotify.lightGray",w:"8",textAlign:"center",fontSize:"sm",children:o}),e.jsxs(y,{flex:"2",gap:4,children:[e.jsx(L,{src:r?.album.images[0].url,alt:r?.name,boxSize:"40px",borderRadius:"sm",objectFit:"cover"}),e.jsxs(v,{children:[e.jsx(u,{fontWeight:"medium",fontSize:"md",lineHeight:"short",color:"white",children:r?.name}),e.jsx(u,{color:"spotify.lightGray",fontSize:"sm",children:r?.artists[0].name})]})]}),e.jsx(S,{flex:"2",align:"center",display:{base:"none",md:"flex"},children:e.jsx(u,{color:"spotify.lightGray",fontSize:"sm",children:r?.album.name})}),e.jsx(S,{w:"16",flex:1,align:"center",children:e.jsx(u,{color:"spotify.lightGray",fontSize:"sm",children:(r?.duration_ms/6e4).toFixed(2).split(".").join(":")})}),e.jsxs(S,{w:"24",justify:"flex-end",align:"center",gap:3,children:[e.jsx(v,{color:"spotify.green",children:e.jsx(Be,{size:20})}),e.jsx(w,{bg:"spotify.green",color:"black",variant:"solid",borderRadius:"full",px:2,children:t})]})]})}function Ko({recommendations:o}){const[r,t]=l.useState(!1),s=async()=>{if(!(r||o.length===0)){t(!0);try{const n=await qe();if(!n)throw new Error("Failed to get user profile");const i=`SpotyFusion Recommendations - ${new Date().toLocaleDateString()}`,d=`Generated playlist with ${o.length} recommendations based on your preferences.`,m=await _e(n.id,i,d,!1),a=o.map(b=>`spotify:track:${b.track.id}`);await Ue(m.id,a),F.create({title:"Playlist créée avec succès!",description:`${o.length} morceaux ajoutés à "${i}"`,type:"success",duration:5e3})}catch(n){console.error("Error saving playlist:",n),F.create({title:"Erreur lors de la création",description:n instanceof Error?n.message:"Impossible de créer la playlist",type:"error",duration:5e3})}finally{t(!1)}}};return e.jsx(z,{width:"100%",bg:"spotify.darker",borderRadius:"12px",children:e.jsxs(V,{padding:"16px",gap:"24px",children:[e.jsxs(y,{justifyContent:"space-between",children:[e.jsxs(u,{fontWeight:"bold",fontSize:"2xl",children:["Recommandations (",o.length,")"]}),e.jsxs(N,{px:"24px",py:"16px",fontSize:"lg",borderRadius:"full",size:"2xl",onClick:s,loading:r,disabled:o.length===0,children:[e.jsx(T,{boxSize:6,color:"black",as:Yo}),r?"Sauvegarde...":"Sauvegarder la Playlist"]})]}),o.map((n,i)=>e.jsx(Jo,{index:i+1,track:n.track,score:n.score},i))]})})}function ar(){const[o,r]=l.useState([]);return e.jsxs(k,{align:"start",overflowY:"auto",overflowX:"hidden",height:"100%",width:"100%",gap:"32px",p:4,css:{"& ::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none",msOverflowStyle:"none"},children:[e.jsxs(v,{gap:2,children:[e.jsx(u,{fontSize:"4xl",fontWeight:"bold",color:"spotify.white",children:"Générateur de Playlists"}),e.jsx(u,{fontSize:"md",fontWeight:"normal",color:"spotify.lightGray",children:"Créez des playlists personnalisées basées sur vos préférences musicales"})]}),e.jsx(v,{width:"100%",children:e.jsx(Xo,{onRecommendationsChange:r})}),e.jsx(v,{width:"100%",children:e.jsx(Ko,{recommendations:o})})]})}export{ar as component};
