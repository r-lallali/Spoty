import{j as e,I as W,A as l,r as h,t as L,D as R,B as z,R as C,S as g}from"./index-DdlObs6W.js";import{F as A,a as E}from"./index-CkrcthVr.js";import{V as f,F as p,H as b}from"./v-stack-DhS3kTGh.js";import{I as u}from"./image-ChmrOsv1.js";import{T as i}from"./index-_MCSnTcs.js";import{c as T,I as j}from"./create-icon-CWbwgp3R.js";import{a as w}from"./utils-CWkz1AUb.js";function m({direction:r,onClick:t,visible:a}){return a?e.jsx(W,{"aria-label":r==="left"?"Scroll left":"Scroll right",position:"absolute",left:r==="left"?0:"auto",right:r==="right"?0:"auto",top:"50%",transform:"translateY(-50%)",width:"40px",height:"40px",minW:"40px",borderRadius:"full",bg:"rgba(0, 0, 0, 0.7)",color:"white",onClick:t,zIndex:10,_hover:{bg:"rgba(0, 0, 0, 0.9)"},children:r==="left"?e.jsx(A,{}):e.jsx(E,{})}):null}function v({artist:r,index:t}){return!r||t===void 0?e.jsxs(f,{minW:"120px",gap:3,children:[e.jsx(l,{w:"120px",h:"120px",bg:"spotify.gray",borderRadius:"full"}),e.jsx(l,{w:"100%",h:"20px",bg:"spotify.gray",borderRadius:"md"})]}):e.jsxs(f,{minW:"120px",gap:3,overflow:"visible",children:[e.jsx(l,{w:"120px",h:"120px",cursor:"pointer",transition:"all 0.2s ease-in-out",_hover:{transform:"scale(1.08)"},children:e.jsx(u,{src:r.images[0]?.url||"/default-artist.png",alt:r.name,w:"100%",h:"100%",borderRadius:"full",objectFit:"cover"})}),e.jsxs(i,{fontSize:"sm",color:"spotify.white",textAlign:"center",maxW:"120px",truncate:!0,children:[e.jsxs(i,{as:"span",color:"spotify.white",fontWeight:"bold",children:["#",t+1,"."]})," ",r.name]})]})}function _({topArtists:r}){const t=h.useRef(null),[a,c]=h.useState({left:!1,right:!1}),n=h.useCallback(()=>{const o=t.current;if(!o)return;const s=o.scrollLeft>0,d=o.scrollLeft<o.scrollWidth-o.clientWidth-1;c({left:s,right:d})},[]);h.useEffect(()=>{const o=t.current;if(o)return n(),o.addEventListener("scroll",n),window.addEventListener("resize",n),()=>{o.removeEventListener("scroll",n),window.removeEventListener("resize",n)}},[n,r]);const x=o=>{const s=t.current;if(!s)return;const d=300;s.scrollBy({left:o==="left"?-d:d,behavior:"smooth"})};return r.length===0?e.jsxs(l,{position:"relative",children:[e.jsx(p,{gap:5,css:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none"},children:Array.from({length:10}).map((o,s)=>e.jsx(v,{},s))}),e.jsx(l,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"spotify.darker",p:4,borderRadius:"md",textAlign:"center",border:"1px solid",borderColor:"spotify.border",children:e.jsx(i,{fontSize:"md",color:"spotify.lightGray",children:"Aucune donnée disponible pour cette période."})})]}):e.jsxs(l,{position:"relative",width:"100%",overflow:"visible",children:[e.jsx(p,{ref:t,gap:5,overflowX:"auto",py:3,px:2,css:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",overflowY:"visible"},children:r.map((o,s)=>e.jsx(v,{artist:o,index:s},o.id))}),e.jsx(m,{direction:"left",onClick:()=>x("left"),visible:a.left}),e.jsx(m,{direction:"right",onClick:()=>x("right"),visible:a.right})]})}const S=T({displayName:"ClockIcon",defaultProps:{fill:"none",viewBox:"0 0 16 16"},path:e.jsxs(e.Fragment,{children:[e.jsx("path",{d:"M8 4V8L10.6667 9.33333",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8.00001 14.6666C11.6819 14.6666 14.6667 11.6818 14.6667 7.99992C14.6667 4.31802 11.6819 1.33325 8.00001 1.33325C4.31811 1.33325 1.33334 4.31802 1.33334 7.99992C1.33334 11.6818 4.31811 14.6666 8.00001 14.6666Z",stroke:"currentColor",strokeWidth:"1.33333",strokeLinecap:"round",strokeLinejoin:"round"})]})});function I({recentlyPlayed:r}){return e.jsxs(p,{gap:4,flexDir:{base:"column",lg:"row"},overflow:"visible",maxW:"100%",children:[r[0]&&e.jsxs(l,{flexShrink:0,w:"240px",children:[e.jsx(u,{src:r[0].track.album.images[0]?.url||"/default-album.png",alt:r[0].track.album.name,w:"240px",h:"240px",borderRadius:"md",objectFit:"cover",mb:3,boxShadow:"lg"}),e.jsxs(f,{align:"start",gap:2,children:[e.jsx(i,{fontSize:"2xl",fontWeight:"semibold",color:"spotify.white",lineHeight:"short",wordBreak:"break-word",children:r[0].track.name}),e.jsx(i,{fontSize:"xl",color:"spotify.lightGray",children:r[0].track.artists[0]?.name}),e.jsxs(b,{gap:2,color:"spotify.lightGray",fontSize:"sm",children:[e.jsx(j,{as:S,boxSize:4}),e.jsx(i,{children:w(r[0].played_at)})]})]})]}),e.jsx(f,{flex:1,gap:3,align:"stretch",overflow:"visible",children:r.slice(1).map((t,a)=>e.jsxs(p,{align:"center",gap:3,p:4,bg:"spotify.darker",border:"1px solid",borderColor:"spotify.border",width:"100%",borderRadius:"md",cursor:"pointer",transition:"all 0.2s ease-in-out",_hover:{transform:"scale(1.02)",bg:"rgba(255, 255, 255, 0.08)",borderColor:"spotify.green"},children:[e.jsx(u,{src:t.track.album.images[0]?.url||"/default-album.png",alt:t.track.album.name,w:"50px",h:"50px",borderRadius:"sm",objectFit:"cover",flexShrink:0}),e.jsxs(f,{flex:1,align:"start",gap:0,minW:0,children:[e.jsx(i,{fontSize:"md",fontWeight:"semibold",color:"spotify.white",truncate:!0,w:"full",children:t.track.name}),e.jsx(i,{fontSize:"sm",color:"spotify.lightGray",truncate:!0,w:"full",children:t.track.artists[0]?.name})]}),e.jsxs(b,{gap:2,color:"spotify.lightGray",fontSize:"sm",flexShrink:0,children:[e.jsx(j,{as:S,boxSize:4}),e.jsx(i,{whiteSpace:"nowrap",children:w(t.played_at)})]})]},`${t.track.id}-${a}`))})]})}const y={short_term:"4 semaines",medium_term:"6 mois",long_term:"Tout le temps"};function F(){const r=L({from:"/dashboard/stats"}),{range:t}=R({from:"/dashboard/stats/"}),a=c=>{r({search:n=>({...n,range:c}),replace:!0})};return Object.keys(y).map(c=>e.jsx(z,{px:4,py:2,fontSize:"sm",height:"41px",fontWeight:"semibold",borderRadius:"full",bg:t===c?"spotify.white":"whiteAlpha.100",color:t===c?"black":"white",onClick:()=>a(c),_hover:{bg:t===c?"spotify.white":"whiteAlpha.200",borderColor:t===c?"transparent":"whiteAlpha.500"},children:y[c]},c))}function k({track:r,index:t}){return!r||t===void 0?e.jsxs(f,{minW:"120px",alignItems:"flex-start",gap:2,children:[e.jsx(l,{w:"120px",h:"120px",bg:"spotify.gray"}),e.jsx(l,{w:"100%",h:"21px",bg:"spotify.gray",borderRadius:"md"}),e.jsx(l,{w:"80%",h:"24px",bg:"spotify.gray",borderRadius:"md"})]}):e.jsxs(f,{minW:"120px",gap:2,align:"start",overflow:"visible",children:[e.jsx(l,{w:"120px",h:"120px",cursor:"pointer",transition:"all 0.2s ease-in-out",_hover:{transform:"scale(1.08)"},children:e.jsx(u,{src:r.album.images[0]?.url||"/default-album.png",alt:r.album.name,w:"100%",h:"100%",objectFit:"cover"})}),e.jsxs(i,{fontSize:"sm",fontWeight:"bold",color:"spotify.white",maxW:"120px",truncate:!0,children:[e.jsxs(i,{as:"span",children:["#",t+1,"."]})," ",r.name]}),e.jsx(i,{fontSize:"md",color:"spotify.lightGray",maxW:"120px",truncate:!0,children:r.artists[0]?.name})]})}function B({topTracks:r}){const t=h.useRef(null),[a,c]=h.useState({left:!1,right:!1}),n=h.useCallback(()=>{const o=t.current;if(!o)return;const s=o.scrollLeft>0,d=o.scrollLeft<o.scrollWidth-o.clientWidth-1;c({left:s,right:d})},[]);h.useEffect(()=>{const o=t.current;if(o)return n(),o.addEventListener("scroll",n),window.addEventListener("resize",n),()=>{o.removeEventListener("scroll",n),window.removeEventListener("resize",n)}},[n,r]);const x=o=>{const s=t.current;if(!s)return;const d=300;s.scrollBy({left:o==="left"?-d:d,behavior:"smooth"})};return r.length===0?e.jsxs(l,{position:"relative",children:[e.jsx(p,{gap:5,css:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none"},children:Array.from({length:10}).map((o,s)=>e.jsx(k,{},s))}),e.jsx(l,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"spotify.darker",p:4,borderRadius:"md",textAlign:"center",border:"1px solid",borderColor:"spotify.border",children:e.jsx(l,{fontSize:"md",color:"spotify.lightGray",children:"Aucune donnée disponible pour cette période."})})]}):e.jsxs(l,{position:"relative",width:"100%",overflow:"visible",children:[e.jsx(p,{ref:t,gap:5,overflowX:"auto",py:3,px:2,css:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",overflowY:"visible"},children:r.map((o,s)=>e.jsx(k,{track:o,index:s},o.id))}),e.jsx(m,{direction:"left",onClick:()=>x("left"),visible:a.left}),e.jsx(m,{direction:"right",onClick:()=>x("right"),visible:a.right})]})}function X(){const{topArtists:r,topTracks:t,recentlyPlayed:a}=C.useLoaderData();return e.jsxs(f,{align:"start",overflowY:"auto",overflowX:"hidden",height:"100%",width:"100%",gap:"32px",p:4,css:{"& ::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none",msOverflowStyle:"none"},children:[e.jsxs(l,{gap:2,children:[e.jsx(i,{fontSize:"4xl",fontWeight:"bold",color:"spotify.white",children:"Vos Statistiques"}),e.jsx(i,{fontSize:"md",fontWeight:"normal",color:"spotify.lightGray",children:"Découvrez vos artistes et morceaux préférés"})]}),e.jsx(b,{gap:2,children:e.jsx(F,{})}),e.jsxs(g,{direction:"column",gap:6,width:"100%",children:[e.jsx(i,{fontSize:"2xl",fontWeight:"bold",color:"spotify.white",children:"Top 10 Artistes"}),e.jsx(_,{topArtists:r})]}),e.jsxs(g,{direction:"column",gap:6,width:"100%",children:[e.jsx(i,{fontSize:"2xl",fontWeight:"bold",color:"spotify.white",children:"Top 10 Morceaux"}),e.jsx(B,{topTracks:t})]}),e.jsxs(g,{direction:"column",width:"100%",gap:6,children:[e.jsx(i,{fontSize:"2xl",fontWeight:"bold",color:"spotify.white",children:"5 Derniers Titres Écoutés"}),e.jsx(I,{recentlyPlayed:a})]})]})}export{X as component};
