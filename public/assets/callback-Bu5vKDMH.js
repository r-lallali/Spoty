import{r as c,j as r,C as i,x as d,y as o,z as l}from"./index-DdlObs6W.js";const p=async()=>{const t=new URLSearchParams(window.location.search).get("code"),n=localStorage.getItem("code_verifier"),s="https://accounts.spotify.com/api/token",a={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:o.clientId,grant_type:"authorization_code",code:t||"",redirect_uri:o.redirectUri,code_verifier:n||""})},e=await(await fetch(s,a)).json();if(e.error){console.error("Error fetching token:",e.error),l.error({title:"Une erreur est survenue",description:"Veuillez rÃ©essayer plus tard."}),window.location.href="/";return}localStorage.removeItem("code_verifier"),localStorage.setItem("access_token",e.access_token),localStorage.setItem("refresh_token",e.refresh_token),window.location.href="/dashboard"};function m(){return c.useEffect(()=>{p()},[]),r.jsx(i,{h:"100vh",children:r.jsx(d,{size:"xl",color:"green.500",borderWidth:"4px"})})}export{m as component};
